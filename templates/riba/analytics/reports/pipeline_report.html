{% extends "analytics/base.html" %}
{% block content %}
<div class="span-24 last">
    <div class="p5">
        <h3>Pipeline report</h3>
    </div>
</div>
<div class="span-24 last">
    <div class="span-9">
        <div class="">
            <div class="ca">Pipeline</div>
            <table cellpadding="2" cellspacing="2" style="border-collapse:collapse">
                <tr class="header">
                    <td>Date</td>
                    <td>Source</td>
                    <td>Booked</td>
                    <td>Paid</td>
                    <td>Approved</td>
                    <td>Del. Gen</td>
                    <td>Delivered</td>
                </tr>
                {% for day in days %}
                <tr class="{%cycle "row1" "row2" %}">
                    <td rowspan="2">{{day.day|date:"d N"}}<br/>{{day.day|date:"Y"}}</td>
                    <td>Web</td>
                    <td>{{day.wbooked.count}}</td>
                    <td>{{day.wpaid.count}}</td>
                    <td>{{day.wapproved.count}}</td>
                    <td>{{day.wdelivery_generated.count}}</td>
                    <td>{{day.wdelivered.count}}</td>
                </tr>
                <tr class="{%cycle "row1" "row2" %}">
                    <td>Phone</td>
                    <td>{{day.pbooked.count}}</td>
                    <td>{{day.ppaid.count}}</td>
                    <td>{{day.papproved.count}}</td>
                    <td>{{day.pdelivery_generated.count}}</td>
                    <td>{{day.pdelivered.count}}</td>
                </tr>
                {% endfor %}
                <tr class="{%cycle "row1" "row2" %}">
                    <td rowspan="2">Total</td>
                    <td>Web</td>
                    <td>{{sum.wbooked.count}}</td>
                    <td>{{sum.wpaid.count}}</td>
                    <td>{{sum.wapproved.count}}</td>
                    <td>{{sum.wdelivery_generated.count}}</td>
                    <td>{{sum.wdelivered.count}}</td>
                </tr>
                <tr class="{%cycle "row1" "row2" %}">
                    <td>Phone</td>
                    <td>{{sum.pbooked.count}}</td>
                    <td>{{sum.ppaid.count}}</td>
                    <td>{{sum.papproved.count}}</td>
                    <td>{{sum.pdelivery_generated.count}}</td>
                    <td>{{sum.pdelivered.count}}</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="span-6">
        <div class="">
            <div class="ca">Paid</div>
            <table cellpadding="2" cellspacing="2" style="border-collapse:collapse">
                <tr class="header">
                    <td>Unverified</td>
                    <td>Failed</td>
                    <td>Cancelled</td>
                    <td>Approved</td>
                </tr>
                {% for day in days %}
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{day.wawaiting.count}}</td>
                    <td>{{day.wfailed.count}}</td>
                    <td>{{day.wcancelled.count}}</td>
                    <td>{{day.wapproved.count}}</td>
                </tr>
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{day.pawaiting.count}}</td>
                    <td>{{day.pfailed.count}}</td>
                    <td>{{day.pcancelled.count}}</td>
                    <td>{{day.papproved.count}}</td>
                </tr>
                {% endfor %}
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{sum.wawaiting.count}}</td>
                    <td>{{sum.wfailed.count}}</td>
                    <td>{{sum.wcancelled.count}}</td>
                    <td>{{sum.wapproved.count}}</td>
                </tr>
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{sum.pawaiting.count}}</td>
                    <td>{{sum.pfailed.count}}</td>
                    <td>{{sum.pcancelled.count}}</td>
                    <td>{{sum.papproved.count}}</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="span-3">
        <div class="">
            <div class="ca">Approved</div>
            <table cellpadding="2" cellspacing="2" style="border-collapse:collapse">
                <tr class="header">
                    <td>Open</td>
                    <td>Del. Gen</td>
                </tr>
                {% for day in days %}
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{day.wopen.count}}</td>
                    <td>{{day.wdelivery_generated.count}}</td>
                </tr>
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{day.popen.count}}</td>
                    <td>{{day.pdelivery_generated.count}}</td>
                </tr>
                {% endfor %}
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{sum.wopen.count}}</td>
                    <td>{{sum.wdelivery_generated.count}}</td>
                </tr>
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{sum.popen.count}}</td>
                    <td>{{sum.pdelivery_generated.count}}</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="span-6 last">
        <div class="">
            <div class="ca">Delivery Generated</div>
            <table cellpadding="2" cellspacing="2" style="border-collapse:collapse">
                <tr class="header">
                    <td>Not Invoiced</td>
                    <td>Not Dispatched</td>
                    <td>In Transit</td>
                </tr>
                {% for day in days %}
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{day.wnotinvoiced.count}}</td>
                    <td>{{day.wnotdispatched.count}}</td>
                    <td>{{day.wintransit.count}}</td>
                </tr>
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{day.pnotinvoiced.count}}</td>
                    <td>{{day.pnotdispatched.count}}</td>
                    <td>{{day.pintransit.count}}</td>
                </tr>
                {% endfor %}
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{sum.wnotinvoiced.count}}</td>
                    <td>{{sum.wnotdispatched.count}}</td>
                    <td>{{sum.wintransit.count}}</td>
                </tr>
                <tr class="{%cycle "row1" "row2" %}">
                    <td>{{sum.pnotinvoiced.count}}</td>
                    <td>{{sum.pnotdispatched.count}}</td>
                    <td>{{sum.pintransit.count}}</td>
                </tr>
            </table>
        </div>
    </div>
</div>
{% endblock %}
