<div class="margin_t10" style="margin:10px 5px;">
<div class="left">
<form method='get' action=''>
    <h2 class="fb">{{title}}</h2>
    <div class="f11"> {{from_date|date:"d M, Y"}} - {{to_date|date:"d M, Y"}} </div>
</form>
</div>
<div id="dr_container">
<form>
<ul class="date_range">

<li class= {% if search_trend == "day" %} "sel_dr" {%else%} "white" {%endif%} id="id_day">Day</span>
<li class= {% if search_trend == "week" %} "sel_dr" {%else%} "white" {%endif%} id="id_week">Week</span>
<li class= {% if search_trend == "month" %} "sel_dr" {%else%} "white" {%endif%} id="id_month">Month</span>
<li id="li_dr">
<input type="text" id="dr" value="{{from_date|date:'d M, Y'}} - {{to_date|date:'d M, Y'}}" /> </li>
</ul>
<div class="clear"></div>
</form>
<form method="get">
<div id="sr" style="display:none;">
    <table class="tbl_sr">
      <tr>       
        <td>From </td>
        <td><input type="text" Name="from" id="id_from" Autocomplete=OFF /></td>
        <td class="ra" width="80">To</td>
        <td><input type="text" Name="to" id="id_to" Autocomplete=OFF /></td>
        <td>
      <button type="button" id="id_apply" disabled=True class="orange rc5" >Apply</button>
          </td>
      </tr>
    </table>
  </div>
</form>
</div>
</div>
<script type="text/javascript" language="javascript">   
        $(function() {          
    
                $("#dr").toggle(function()
                {           
                    $( "#sr" ).show("fast", 0);                     
                    return false;           
                },
                
                function()
                {                   
                        $( "#sr" ).hide("fast", 0);                                         
                        return false;
                });     
        }); 

</script>
<script type="text/javascript" language="javascript">   
    $('#id_from').datepicker({dateFormat: 'dd M, yy', maxDate:'0',
        onSelect: function(){
            $('#id_to').datepicker('enable');
        },
    });
    $('#id_to').datepicker({dateFormat: 'dd M, yy', minDate:$('#id_from').val(),maxDate:'0',
        beforeShow: function(){
            var newDate = $('#id_from').datepicker('getDate');
            if(newDate){
                $('#id_to').datepicker('option','minDate', newDate);                   
            }
            else{
                $('#id_to').datepicker('disable'),True;
            }
        },
        onSelect: function(){
            document.getElementById('id_apply').disabled = false;
        },
    });
</script>
<script type="text/javascript" language="javascript">   
    $('#id_apply').click(function(){
        url_path = '{{url|safe}}';
        if('{{args}}' == "call_volume"){
            url_path += "agent=" + $('#id_agent').val() + "&call_type=" + $('#id_call_type').val() + "&";
        }
        else if ('{{args}}' == "call_data"){
            url_path += "agent=" + $('#id_agent').val() + "&did_no=" + $('#id_did').val() + "&";
        }
        else if('{{args}}'!="orders"){
            url_path += "seller=" + $('#id_seller').val() + "&";
        }
        url_path += "source=" + $('#id_source').val() + "&from=" + $('#id_from').val() + "&to=" + $('#id_to').val() ;
        location.href = url_path;
    });
</script>
<script type="text/javascript" language="javascript">   
    $('#id_day').click(function(){
        url_path = '{{url|safe}}' + "search_trend=day";
        if('{{args}}' == "call_volume"){
            url_path += "&agent=" + $('#id_agent').val() + "&call_type=" + $('#id_call_type').val();
        }
        else if ('{{args}}' == "call_data"){
            url_path += "&agent=" + $('#id_agent').val() + "&did_no=" + $('#id_did').val();
        }
        else if('{{args}}'!="orders"){
            url_path += "&seller=" + $('#id_seller').val();
        }

        url_path += "&source=" + $('#id_source').val();
        location.href = url_path
    });
    $('#id_week').click(function(){
        url_path = '{{url|safe}}' + "search_trend=week";
        if('{{args}}' == "call_volume"){
            url_path += "&agent=" + $('#id_agent').val() + "&call_type=" + $('#id_call_type').val();
        }
        else if ('{{args}}' == "call_data"){
            url_path += "&agent=" + $('#id_agent').val() + "&did_no=" + $('#id_did').val();
        }
        else if('{{args}}'!="orders"){
            url_path += "&seller=" + $('#id_seller').val();
        }
        url_path += "&source=" + $('#id_source').val();
        location.href = url_path;
    });
    $('#id_month').click(function(){
        url_path = '{{url|safe}}' + "search_trend=month";
        if('{{args}}' == "call_volume"){
            url_path += "&agent=" + $('#id_agent').val() + "&call_type=" + $('#id_call_type').val();
        }
        else if ('{{args}}' == "call_data"){
            url_path += "&agent=" + $('#id_agent').val() + "&did_no=" + $('#id_did').val();
        }
        else if('{{args}}'!="orders"){
            url_path += "&seller=" + $('#id_seller').val();
        }
        url_path += "&source=" + $('#id_source').val();
        location.href = url_path;
    });
</script>
